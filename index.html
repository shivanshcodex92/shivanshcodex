<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Shivanshcodex</title>

<style>
*{
box-sizing:border-box;
font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto;
}

/* ðŸŒˆ LIVE BACKGROUND */
body{
margin:0;
height:100vh;
background:linear-gradient(-45deg,#0f2027,#203a43,#2c5364,#0b3c49);
background-size:400% 400%;
animation:bgMove 12s ease infinite;
color:#fff;
display:flex;
flex-direction:column;
}

@keyframes bgMove{
0%{background-position:0% 50%}
50%{background-position:100% 50%}
100%{background-position:0% 50%}
}

/* HEADER */
header{
padding:16px;
background:rgba(0,0,0,.25);
backdrop-filter:blur(12px);
display:flex;
justify-content:space-between;
align-items:center;
}
header h1{margin:0;font-size:24px}
header span{font-size:13px;color:#bde5dc}
header button{
background:#25d366;
border:none;
padding:10px 18px;
border-radius:20px;
font-weight:600;
cursor:pointer;
box-shadow:0 8px 20px rgba(37,211,102,.4);
transition:.2s;
}
header button:active{transform:scale(.95)}

/* LOGIN CONTAINER */
#loginBox{
flex:1;
display:flex;
align-items:center;
justify-content:center;
}

/* FLOATING GLASS CARD */
.login-card{
width:92%;
max-width:380px;
background:rgba(255,255,255,.08);
backdrop-filter:blur(18px);
border-radius:22px;
padding:26px;
box-shadow:0 30px 60px rgba(0,0,0,.35);
animation:float 4s ease-in-out infinite;
}

@keyframes float{
0%,100%{transform:translateY(0)}
50%{transform:translateY(-6px)}
}

.login-card h2{
margin-top:0;
font-size:26px;
text-align:center;
}

/* INPUTS */
input{
width:100%;
padding:16px;
border-radius:16px;
border:none;
margin-bottom:14px;
font-size:15px;
background:rgba(255,255,255,.9);
outline:none;
}

/* BUTTONS */
.btn-row{
display:flex;
gap:12px;
margin-top:6px;
}
.btn{
flex:1;
padding:14px;
border:none;
border-radius:20px;
background:#25d366;
color:#000;
font-weight:700;
cursor:pointer;
box-shadow:0 10px 25px rgba(37,211,102,.45);
transition:.2s;
}
.btn:active{
transform:scale(.96);
box-shadow:0 6px 15px rgba(37,211,102,.4);
}

.tip{
margin-top:14px;
text-align:center;
font-size:13px;
color:#d0f1ea;
}

/* CHAT */
#chatUI{
display:none;
flex:1;
flex-direction:column;
}

.chat-area{
flex:1;
padding:16px;
overflow-y:auto;
}

.msg{
max-width:72%;
padding:12px 16px;
margin-bottom:10px;
border-radius:18px;
font-size:14px;
line-height:1.4;
}
.me{
background:#25d366;
color:#000;
margin-left:auto;
}
.other{
background:rgba(255,255,255,.15);
}

.input-bar{
display:flex;
padding:12px;
background:rgba(0,0,0,.35);
backdrop-filter:blur(10px);
}
.input-bar input{
flex:1;
border-radius:22px;
padding:14px;
border:none;
}
.send{
margin-left:8px;
width:50px;
height:50px;
border-radius:50%;
border:none;
background:#25d366;
font-size:18px;
cursor:pointer;
box-shadow:0 8px 20px rgba(37,211,102,.5);
}
.send:active{transform:scale(.95)}
</style>
</head>

<body>

<header>
<div>
<h1>Shivanshcodex</h1>
<span>WhatsApp-like chat</span>
</div>
<button id="logoutBtn" style="display:none">Logout</button>
</header>

<!-- LOGIN -->
<div id="loginBox">
<div class="login-card">
<h2>Login</h2>
<input id="username" placeholder="Username">
<input id="password" type="password" placeholder="Password">

<div class="btn-row">
<button class="btn" id="loginBtn">Login</button>
<button class="btn" id="signupBtn">Create</button>
</div>

<div class="tip">2 browsers / incognito me test karo</div>
</div>
</div>

<!-- CHAT -->
<div id="chatUI">
<div class="chat-area" id="messages"></div>
<div class="input-bar">
<input id="msgInput" placeholder="Message">
<button class="send" id="sendBtn">âž¤</button>
</div>
</div>

<!-- FIREBASE -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.8.0/firebase-app.js";
import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/12.8.0/firebase-auth.js";
import { getFirestore, collection, addDoc, query, orderBy, onSnapshot, serverTimestamp } from "https://www.gstatic.com/firebasejs/12.8.0/firebase-firestore.js";

const firebaseConfig = {
apiKey: "AIzaSyDS6wdYNG2Q7ZUNPjUXdOn-Sqb3cLC4NgQ",
authDomain: "shivanshcodex-5fa03.firebaseapp.com",
projectId: "shivanshcodex-5fa03",
storageBucket: "shivanshcodex-5fa03.firebasestorage.app",
messagingSenderId: "160989825267",
appId: "1:160989825267:web:891e3ac888a46df3920f86"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const db = getFirestore(app);

const loginBox=document.getElementById("loginBox");
const chatUI=document.getElementById("chatUI");
const logoutBtn=document.getElementById("logoutBtn");

const fakeEmail=u=>u+"@shivansh.chat";

signupBtn.onclick=()=>createUserWithEmailAndPassword(auth,fakeEmail(username.value),password.value);
loginBtn.onclick=()=>signInWithEmailAndPassword(auth,fakeEmail(username.value),password.value);
logoutBtn.onclick=()=>signOut(auth);

onAuthStateChanged(auth,user=>{
loginBox.style.display=user?"none":"flex";
chatUI.style.display=user?"flex":"none";
logoutBtn.style.display=user?"block":"none";
if(user) loadMessages();
});

function loadMessages(){
const q=query(collection(db,"messages"),orderBy("time"));
onSnapshot(q,s=>{
messages.innerHTML="";
s.forEach(d=>{
const m=d.data();
const div=document.createElement("div");
div.className="msg "+(m.uid===auth.currentUser.uid?"me":"other");
div.textContent=m.text;
messages.appendChild(div);
messages.scrollTop=messages.scrollHeight;
});
});
}

sendBtn.onclick=async()=>{
if(!msgInput.value)return;
await addDoc(collection(db,"messages"),{
text:msgInput.value,
uid:auth.currentUser.uid,
time:serverTimestamp()
});
msgInput.value="";
};
</script>

</body>
</html>
