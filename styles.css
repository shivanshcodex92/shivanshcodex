/* ===== Reset ===== */
* { box-sizing: border-box; }
html, body { height: 100%; }
body {
  margin: 0;
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  color: #eaf2f2;
  overflow: hidden; /* IMPORTANT: no page scroll */
  background: #08161a;
}

/* ===== Animated Background ===== */
.bg, .bg2{
  position: fixed;
  inset: -40%;
  z-index: -2;
  pointer-events: none; /* IMPORTANT: never block clicks */
  background:
    radial-gradient(circle at 20% 20%, rgba(0,255,190,.25), transparent 55%),
    radial-gradient(circle at 80% 30%, rgba(0,170,255,.22), transparent 55%),
    radial-gradient(circle at 55% 80%, rgba(0,255,120,.18), transparent 55%),
    radial-gradient(circle at 40% 55%, rgba(120,140,255,.14), transparent 55%);
  filter: blur(40px) saturate(1.25);
  animation: floaty 12s ease-in-out infinite;
}
.bg2{
  z-index: -3;
  opacity: .65;
  animation: floaty2 18s ease-in-out infinite;
}
@keyframes floaty {
  0% { transform: translate3d(-2%, -2%, 0) rotate(0deg); }
  50% { transform: translate3d(2%, 3%, 0) rotate(6deg); }
  100% { transform: translate3d(-2%, -2%, 0) rotate(0deg); }
}
@keyframes floaty2 {
  0% { transform: translate3d(3%, -2%, 0) rotate(0deg); }
  50% { transform: translate3d(-3%, 2%, 0) rotate(-6deg); }
  100% { transform: translate3d(3%, -2%, 0) rotate(0deg); }
}

/* ===== Topbar ===== */
.topbar{
  height: 76px;
  padding: 14px 16px calc(14px + env(safe-area-inset-top));
  display:flex;
  align-items:center;
  justify-content: space-between;
  background: rgba(5, 20, 24, .55);
  border-bottom: 1px solid rgba(255,255,255,.06);
  backdrop-filter: blur(10px);
}
.brand-title{
  font-size: 32px;
  font-weight: 800;
  letter-spacing: .2px;
}
.brand-sub{
  margin-top: 2px;
  opacity: .75;
  font-size: 14px;
}

/* ===== Screens ===== */
.screen{
  height: calc(100vh - 76px);
  padding-bottom: env(safe-area-inset-bottom);
}

/* Centered login */
.centerWrap{
  height: 100%;
  display:flex;
  align-items:center;
  justify-content:center;
  padding: 18px;
}
.card{
  width: min(520px, 92vw);
  background: rgba(10, 22, 26, .55);
  border: 1px solid rgba(255,255,255,.08);
  border-radius: 22px;
  padding: 18px;
  box-shadow: 0 20px 60px rgba(0,0,0,.35);
  backdrop-filter: blur(14px);
}
.login-card{ pointer-events:auto; position:relative; z-index:5; } /* CLICK FIX */
.card-title{
  margin: 0 0 14px 0;
  font-size: 34px;
}
.field{ display:block; margin: 10px 0; }
.field span{
  display:block;
  font-size: 12px;
  opacity: .75;
  margin: 0 0 6px 6px;
}
.input{
  width: 100%;
  padding: 14px 14px;
  border-radius: 16px;
  border: 1px solid rgba(255,255,255,.10);
  outline: none;
  font-size: 16px;
  background: rgba(255,255,255,.92);
  color:#0a0f10;
}
.input::placeholder{ color: rgba(0,0,0,.45); }
.input-dark{
  background: rgba(8, 16, 18, .75);
  color: #eaf2f2;
  border: 1px solid rgba(255,255,255,.08);
}
.input-dark::placeholder{ color: rgba(255,255,255,.35); }

.hint{
  margin-top: 10px;
  opacity: .75;
}

/* Buttons */
.row{ display:flex; align-items:center; }
.gap{ gap: 10px; }
.flex1{ flex:1; }

.btn{
  user-select:none;
  cursor:pointer;
  border: 0;
  padding: 12px 14px;
  border-radius: 14px;
  font-weight: 700;
  font-size: 16px;
  transition: transform .08s ease, filter .2s ease;
}
.btn:active{ transform: scale(.98); }
.btn-pill{ border-radius: 999px; }
.btn-green{
  background: #25D366;
  color: #04220f;
  box-shadow: 0 10px 30px rgba(37,211,102,.18);
}
.btn-green:hover{ filter: brightness(1.05); }
.btn-soft{
  background: rgba(255,255,255,.07);
  color: #eaf2f2;
  border: 1px solid rgba(255,255,255,.08);
}

/* ===== App layout ===== */
.appShell{
  height: calc(100vh - 76px - 64px);
  display:grid;
  grid-template-columns: 1fr;
}
.panel{
  background: rgba(6, 18, 20, .52);
  border: 1px solid rgba(255,255,255,.08);
  border-radius: 18px;
  overflow: hidden;
  backdrop-filter: blur(12px);
}
.chatsPanel{
  display:flex;
  flex-direction:column;
  margin: 12px;
}
.chatPanel{
  display:flex;
  flex-direction:column;
  margin: 12px;
  margin-top: 0;
}

/* On wider screens show 2 columns */
@media (min-width: 860px){
  .appShell{
    grid-template-columns: 360px 1fr;
    gap: 12px;
    padding: 12px;
    height: calc(100vh - 76px - 64px);
  }
  .chatsPanel{ margin:0; }
  .chatPanel{ margin:0; }
}

/* Panels header */
.panelHeader{
  padding: 14px 14px 10px 14px;
  border-bottom: 1px solid rgba(255,255,255,.06);
}
.panelTitle{ font-weight: 800; font-size: 18px; }
.panelMini{ opacity:.65; font-size: 12px; margin-top: 4px; }

.addUserWrap{
  padding: 12px 12px 10px 12px;
  display:flex;
  gap: 10px;
}
.iconBtn{
  width: 46px; height: 46px;
  border-radius: 999px;
  border: 0;
  background: #25D366;
  color:#04220f;
  font-weight: 900;
  font-size: 22px;
  cursor:pointer;
  transition: transform .08s ease;
}
.iconBtn:active{ transform: scale(.98); }

.chatList{
  padding: 6px;
  overflow:auto;
  height: 100%;
}
.chatRow{
  display:flex;
  gap: 10px;
  padding: 10px;
  border-radius: 14px;
  cursor:pointer;
  border: 1px solid transparent;
}
.chatRow:active{ transform: scale(.99); }
.chatRow:hover{
  background: rgba(255,255,255,.04);
  border-color: rgba(255,255,255,.06);
}
.chatRow.active{
  background: rgba(37,211,102,.12);
  border-color: rgba(37,211,102,.18);
}

.chatRow .avatar{
  width: 44px; height: 44px;
  border-radius: 999px;
  background: rgba(255,255,255,.08);
  display:flex;
  align-items:center;
  justify-content:center;
  font-weight: 900;
}
.chatMeta{ flex:1; min-width:0; }
.chatTop{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap: 10px;
}
.chatUser{
  font-weight: 800;
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
}
.chatTime{
  opacity:.65;
  font-size: 12px;
}
.chatBottom{
  margin-top: 3px;
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap: 10px;
}
.chatLast{
  opacity:.75;
  font-size: 13px;
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
}
.badges{
  display:flex;
  align-items:center;
  gap: 8px;
}
.unread{
  min-width: 22px;
  height: 22px;
  padding: 0 7px;
  border-radius: 999px;
  background: #25D366;
  color:#04220f;
  font-weight: 900;
  font-size: 12px;
  display:flex;
  align-items:center;
  justify-content:center;
}
.dot{
  width: 10px; height:10px;
  border-radius: 999px;
  background: rgba(255,255,255,.25);
}
.dot.online{ background: #25D366; }

/* Chat header */
.chatHeader{
  padding: 12px;
  display:flex;
  align-items:center;
  justify-content:space-between;
  border-bottom: 1px solid rgba(255,255,255,.06);
}
.chatHeaderLeft{
  display:flex;
  align-items:center;
  gap: 10px;
  min-width:0;
}
.chatName{
  font-weight: 900;
  font-size: 16px;
}
.chatStatus{
  opacity:.70;
  font-size: 12px;
}

.messages{
  flex:1;
  padding: 14px;
  overflow:auto;
  display:flex;
  flex-direction:column;
  gap: 10px;
}
.emptyState{
  opacity:.65;
  text-align:center;
  margin-top: 20px;
}
.bubble{
  max-width: 82%;
  padding: 10px 12px;
  border-radius: 16px;
  border: 1px solid rgba(255,255,255,.08);
  background: rgba(255,255,255,.06);
  line-height: 1.25;
  word-wrap: break-word;
}
.bubble.me{
  margin-left:auto;
  background: rgba(37,211,102,.18);
  border-color: rgba(37,211,102,.20);
}
.bubble .time{
  margin-top: 6px;
  font-size: 11px;
  opacity:.65;
  text-align:right;
}

/* Composer */
.composer{
  padding: 10px;
  border-top: 1px solid rgba(255,255,255,.06);
  display:flex;
  gap: 10px;
  align-items:center;
}
.sendBtn{
  width: 54px;
  height: 46px;
  border: 0;
  border-radius: 16px;
  background: #25D366;
  color: #04220f;
  font-weight: 900;
  cursor:pointer;
  transition: transform .08s ease;
  display:flex;
  align-items:center;
  justify-content:center;
}
.sendBtn:active{ transform: scale(.98); }
.sendIcon{ font-size: 20px; }

/* Tabs bottom */
.tabs{
  height: 64px;
  display:flex;
  background: rgba(5, 20, 24, .65);
  border-top: 1px solid rgba(255,255,255,.06);
  backdrop-filter: blur(10px);
}
.tab{
  flex:1;
  border:0;
  background: transparent;
  color: rgba(255,255,255,.75);
  font-weight: 800;
  cursor:pointer;
}
.tab.active{ color: #25D366; }
.tab:active{ transform: scale(.98); }

/* Toast */
.toast{
  position: fixed;
  left: 50%;
  bottom: 84px;
  transform: translateX(-50%);
  background: rgba(0,0,0,.65);
  border: 1px solid rgba(255,255,255,.12);
  padding: 10px 12px;
  border-radius: 12px;
  backdrop-filter: blur(10px);
  z-index: 50;
    }
